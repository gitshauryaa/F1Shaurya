<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Immersive Terminal</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Fira Code', monospace;
    background: #0d0d0d;
    color: #00ff00;
    overflow: hidden;
  }

  body {
    display: flex;
    flex-direction: column;
  }

  #terminal {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
    overflow-y: auto;
    white-space: pre-wrap;
    line-height: 1.5em;
  }

  .cursor {
    display: inline-block;
    width: 12px;
    background: #00ff00;
    margin-left: 3px;
    animation: blink 0.7s infinite;
    vertical-align: middle;
  }

  @keyframes blink {
    0%,50%,100% { opacity: 1; }
    25%,75% { opacity: 0; }
  }

  #inputLine {
    display: flex;
    align-items: center;
    font-size: 1em;
  }

  #prompt {
    margin-right: 5px;
  }

  #commandInput {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    color: #00ff00;
    font-family: inherit;
    font-size: inherit;
  }

  /* Mobile responsiveness */
  @media (max-width: 600px) {
    #terminal { padding: 10px; }
    #commandInput { font-size: 0.9em; }
  }
</style>
</head>
<body>

<div id="terminal"></div>

<div id="inputLine">
  <span id="prompt">&gt;</span>
  <input type="text" id="commandInput" autocomplete="off" autofocus>
  <span class="cursor"></span>
</div>

<script>
const terminal = document.getElementById('terminal');
const input = document.getElementById('commandInput');

let bootMessages = [
  "Initializing system...",
  "Loading kernel modules...",
  "Detecting hardware...",
  "Starting services...",
  "System online. Type 'help' to begin."
];

// Commands
const commands = {
  help: "Available commands:\nhelp - list commands\nclear - clear terminal\nbg - change background\nclock - show clock",
  clear: () => { terminal.innerHTML = ""; return ""; },
  bg: () => { 
    const colors = ['#0d0d0d','#101020','#201010','#001020','#202000'];
    document.body.style.background = colors[Math.floor(Math.random()*colors.length)];
    return "Background color changed.";
  },
  clock: () => {
    const now = new Date();
    return "Current time: " + now.toLocaleTimeString();
  }
};

// Typing animation for boot
function typeLine(text, callback) {
  let i = 0;
  function typeChar() {
    if(i < text.length){
      terminal.innerHTML += text[i];
      i++;
      terminal.scrollTop = terminal.scrollHeight;
      setTimeout(typeChar, 30);
    } else {
      terminal.innerHTML += "\n";
      terminal.scrollTop = terminal.scrollHeight;
      if(callback) callback();
    }
  }
  typeChar();
}

// Boot sequence
function bootSystem(messages, index = 0){
  if(index < messages.length){
    typeLine(messages[index], () => bootSystem(messages, index+1));
  }
}

bootSystem(bootMessages);

// Handle user commands
function handleCommand(cmd){
  cmd = cmd.trim().toLowerCase();
  if(!cmd) return;
  if(commands[cmd]){
    const result = typeof commands[cmd] === "function" ? commands[cmd]() : commands[cmd];
    if(result) typeLine(result);
  } else {
    typeLine("Unknown command: " + cmd);
  }
}

// Enter key
input.addEventListener("keydown", function(e){
  if(e.key === "Enter"){
    const command = input.value;
    typeLine("> " + command);
    handleCommand(command);
    input.value = "";
  }
});

// Focus input if user clicks anywhere
document.addEventListener("click", () => input.focus());
</script>

</body>
</html>
